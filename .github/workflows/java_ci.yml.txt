# اسم سير العمل الذي سيظهر في GitHub Actions
name: Java CI with Maven Unit Tests

# تحديد الأحداث التي تطلق سير العمل: عند push أو pull request على الفرع main
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
    
jobs: # Job واحد لتنفيذ البناء والاختبار
  build_and_test:
    runs-on: ubuntu-latest # تشغيل على خادم Linux مستضاف من GitHub

    steps:
    # 1. سحب الكود
    - name: Checkout Code
      uses: actions/checkout@v4
      
    # 2. إعداد بيئة Java
    - name: Set up JDK 17
      uses: actions/setup-java@v4
      with:
        java-version: '17' # اختاري إصدار Java المناسب لمشروعك
        distribution: 'temurin'
        cache: maven
        
    # 3. تشغيل اختبارات الوحدة
    - name: Run Maven Unit Tests
      # الأمر mvn clean install يشمل مرحلة 'test' التي تشغل جميع الاختبارات
      run: mvn clean install 
      
    - name: CI Completed Successfully
      run: echo "✅ All required unit tests passed! Merging allowed."